services:
  kallam:
    build: .
    container_name: kallam
    ports:
      - "${KALLAM_PORT:-8000}:8000"
    environment:
      DJANGO_SECRET_KEY: ${DJANGO_SECRET_KEY:-change-me-in-production}
      DJANGO_DEBUG: ${DJANGO_DEBUG:-false}
      DJANGO_ALLOWED_HOSTS: ${DJANGO_ALLOWED_HOSTS:-127.0.0.1,localhost}
      DJANGO_DB_PATH: /app/data/db.sqlite3
      DJANGO_MEDIA_ROOT: /app/media
      GUNICORN_WORKERS: ${GUNICORN_WORKERS:-2}
      GUNICORN_THREADS: ${GUNICORN_THREADS:-4}
      GUNICORN_TIMEOUT: ${GUNICORN_TIMEOUT:-60}
    volumes:
      - ./data:/app/data
      - ./media:/app/media
    restart: unless-stopped
